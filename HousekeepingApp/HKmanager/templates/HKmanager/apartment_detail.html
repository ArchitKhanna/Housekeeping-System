{% extends "HKmanager/base.html" %}
{% block content %}
  <article class="media content-section">
    <div class="media-body">
      <h2 class="article-title">Apartment {{ object.number }} - {{ object.block }}</h2>
      <p class="article-content">Rooms: {{ object.rooms }}</p>
      <br>
      <div id="status {{object.number}}" class="col-sm-3 text-white">
        <p class="article-content text-center pt-3 pb-3">{{ object.status }}</p>
      </div>
      <div id="task {{object.number}}" class="col-sm-3 text-white">
        <p class="article-content text-center pt-3 pb-3">{{ object.task }}</p>
      </div>
      <p class="article-content">Assigned To: {{ object.assignee.first_name }} {{ object.assignee.last_name }}</p>
      {% if object.assignee == user or user.is_superuser %}
        <a class="btn btn-secondary btn-sm mt-1 mb-1" href="{% url 'hk-apt-update' object.id %}">Update Apartment</a>
      {% endif %}
      {% if user.is_superuser %}
        <a class="btn btn-secondary btn-outline-danger btn-sm mt-1 mb-1" href="{% url 'hk-apt-delete' object.id %}">Delete Apartment</a>
      {% endif %}
      <hr>
      <h4 class="article-title ml-3">Living Room {{ object.livingroom.apartment }}</h4>
      <div class="container">
        <div class="row">
          <div class="col-sm-8">
            <table class="table table-bordered table-sm">
              <tr>
                <th>Task</th>
                <th>Status</th>
                <th>Callbacks</th>
              </tr>
              {% for task in livingRoomCheckList %}
                <tr>
                  <td class="twidth-lg">{{ task.task }}</td>
                  {% if task.checked %}
                    <td class="twidth-md">
                      <center>
                        <a class="green-text" href="{% url 'task-undo' object.id task.id 1 %}">
                          Completed
                        </a>
                      </center>
                    </td>
                  {% else %}
                    <td class="twidth-md">
                      <center>
                        <a class="red-text" href="{% url 'task-complete' object.id task.id 1 %}">
                          Pending
                        </a>
                      </center>
                    </td>
                  {% endif %}
                  {% if task.callback %}
                    <td>
                      <center>
                        {% if user.is_superuser %}
                          <a class="orange-text" href="{% url 'callback-undo' object.id task.id 1 %}">
                            Call Back!
                          </a>
                        {% else %}
                          <p class="orange-text">
                            Call Back!
                          </p>
                        {% endif %}
                      </center>
                    </td>
                  {% else %}
                    <td>
                      <center>
                        {% if user.is_superuser %}
                          <a class="green-text" href="{% url 'callback-undo' object.id task.id 1 %}">
                            Set Callback
                          </a>
                        {% endif %}
                      </center>
                    </td>
                  {% endif %}
                </tr>
              {% endfor %}
            </table>
          </div>
        </div>
      </div>
      <hr>
      <h4 class="article-title ml-3">Kitchen {{ object.kitchen.apartment }}</h4>
      <div class="container">
        <div class="row">
          <div class="col-sm-8">
            <table class="table table-bordered table-sm">
              <tr>
                <th>Task</th>
                <th>Status</th>
                <th>Callbacks</th>
              </tr>
              {% for task in kitchenCheckList %}
                <tr>
                  <td class="twidth-lg">{{ task.task }}</td>
                  {% if task.checked %}
                    <td class="twidth-md">
                      <center>
                        <a class="green-text" href="{% url 'task-undo' object.id task.id 2 %}">
                          Completed
                        </a>
                      </center>
                    </td>
                  {% else %}
                    <td class="twidth-md">
                      <center>
                        <a class="red-text" href="{% url 'task-complete' object.id task.id 2 %}">
                          Pending
                        </a>
                      </center>
                    </td>
                  {% endif %}
                  {% if task.callback %}
                    <td>
                      <center>
                        {% if user.is_superuser %}
                          <a class="orange-text" href="{% url 'callback-undo' object.id task.id 2 %}">
                            Call Back!
                          </a>
                        {% else %}
                          <p class="orange-text">
                            Call Back!
                          </p>
                        {% endif %}
                      </center>
                    </td>
                  {% else %}
                    <td>
                      <center>
                        {% if user.is_superuser %}
                          <a class="green-text" href="{% url 'callback-undo' object.id task.id 2 %}">
                            Set Callback
                          </a>
                        {% endif %}
                      </center>
                    </td>
                  {% endif %}
                </tr>
              {% endfor %}
            </table>
          </div>
        </div>
      </div>
      <hr>
      <h4 class="article-title ml-3">Corridor {{ object.corridor.apartment }}</h4>
      <div class="container">
        <div class="row">
          <div class="col-sm-8">
            <table class="table table-bordered table-sm">
              <tr>
                <th>Task</th>
                <th>Status</th>
                <th>Callbacks</th>
              </tr>
              {% for task in corridorCheckList %}
                <tr>
                  <td class="twidth-lg">{{ task.task }}</td>
                  {% if task.checked %}
                    <td class="twidth-md">
                      <center>
                        <a class="green-text" href="{% url 'task-undo' object.id task.id 3 %}">
                          Completed
                        </a>
                      </center>
                    </td>
                  {% else %}
                    <td class="twidth-md">
                      <center>
                        <a class="red-text" href="{% url 'task-complete' object.id task.id 3 %}">
                          Pending
                        </a>
                      </center>
                    </td>
                  {% endif %}
                  {% if task.callback %}
                    <td>
                      <center>
                        {% if user.is_superuser %}
                          <a class="orange-text" href="{% url 'callback-undo' object.id task.id 3 %}">
                            Call Back!
                          </a>
                        {% else %}
                          <p class="orange-text">
                            Call Back!
                          </p>
                        {% endif %}
                      </center>
                    </td>
                  {% else %}
                    <td>
                      <center>
                        {% if user.is_superuser %}
                          <a class="green-text" href="{% url 'callback-undo' object.id task.id 3 %}">
                            Set Callback
                          </a>
                        {% endif %}
                      </center>
                    </td>
                  {% endif %}
                </tr>
              {% endfor %}
            </table>
          </div>
        </div>
      </div>
      <hr>
      <h4 class="article-title ml-3">Rooms {{ object.number }}</h4>
      {% for bedroom in bedrooms %}
        <h5 class="article-title ml-4">Room {{ bedroom.number }}</h5>
        <div class="container ml-2">
          <div class="row">
            <div class="col-sm-8">
              <table class="table table-bordered table-sm">
                <tr>
                  <th>Task</th>
                  <th>Status</th>
                  <th>Callbacks</th>
                </tr>
                {% for task in bedroomCheckList %}
                  {% if task.bedroom == bedroom %}
                    <tr>
                      <td class="twidth-lg">{{ task.task }}</td>
                      {% if task.checked %}
                        <td class="twidth-md">
                          <center>
                            <a class="green-text" href="{% url 'task-undo' object.id task.id 4 %}">
                              Completed
                            </a>
                          </center>
                        </td>
                      {% else %}
                        <td class="twidth-md">
                          <center>
                            <a class="red-text" href="{% url 'task-complete' object.id task.id 4 %}">
                              Pending
                            </a>
                          </center>
                        </td>
                      {% endif %}
                      {% if task.callback %}
                        <td>
                          <center>
                            {% if user.is_superuser %}
                              <a class="orange-text" href="{% url 'callback-undo' object.id task.id 4 %}">
                                Call Back!
                              </a>
                            {% else %}
                              <p class="orange-text">
                                Call Back!
                              </p>
                            {% endif %}
                          </center>
                        </td>
                      {% else %}
                        <td>
                          <center>
                            {% if user.is_superuser %}
                              <a class="green-text" href="{% url 'callback-undo' object.id task.id 4 %}">
                                Set Callback
                              </a>
                            {% endif %}
                          </center>
                        </td>
                      {% endif %}
                    </tr>
                  {% endif %}
                {% endfor %}
              </table>
            </div>
          </div>
        </div>
        <br>
        <h6 class="article-title ml-5">
          Ensuite {{ bedroom.ensuite.bedroom.number }}
        </h6>
        <div class="container ml-4">
          <div class="row">
            <div class="col-sm-8">
              <table class="table table-bordered table-sm">
                <tr>
                  <th>Task</th>
                  <th>Status</th>
                  <th>Callbacks</th>
                </tr>
                {% for task in ensuiteCheckList %}
                  {% if task.ensuite == bedroom.ensuite %}
                    <tr>
                      <td class="twidth-lg">{{ task.task }}</td>
                      {% if task.checked %}
                        <td class="twidth-md">
                          <center>
                            <a class="green-text" href="{% url 'task-undo' object.id task.id 5 %}">
                              Completed
                            </a>
                          </center>
                        </td>
                      {% else %}
                        <td class="twidth-md">
                          <center>
                            <a class="red-text" href="{% url 'task-complete' object.id task.id 5 %}">
                              Pending
                            </a>
                          </center>
                        </td>
                      {% endif %}
                      {% if task.callback %}
                        <td>
                          <center>
                            {% if user.is_superuser %}
                              <a class="orange-text" href="{% url 'callback-undo' object.id task.id 5 %}">
                                Call Back!
                              </a>
                            {% else %}
                              <p class="orange-text">
                                Call Back!
                              </p>
                            {% endif %}
                          </center>
                        </td>
                      {% else %}
                        <td>
                          <center>
                            {% if user.is_superuser %}
                              <a class="green-text" href="{% url 'callback-undo' object.id task.id 5 %}">
                                Set Callback
                              </a>
                            {% endif %}
                          </center>
                        </td>
                      {% endif %}
                    </tr>
                  {% endif %}
                {% endfor %}
              </table>
            </div>
          </div>
        </div>
        <br>
      {% endfor %}
    </div>
  </article>
  <script>
    var num = "{{object.number}}"
    var status = "{{object.status}}";
    var task = "{{object.task}}";
    setStatusClass(status, num);
    setTaskClass(task, num);
  </script>
{% endblock content %}
